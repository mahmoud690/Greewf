if (null == $.fn.scrollParent) throw "You need scrollparent.js for telerik.menu : https://github.com/slindberg/jquery-scrollparent/blob/master/jquery.scrollparent.js"; !function (t) { function e(t) { var e = t.parent(); return { direction: e.hasClass("t-menu") ? e.hasClass("t-menu-vertical") ? "right" : "bottom" : "right" } } function i(e, i) { try { return t.contains(e, i) } catch (n) { return !1 } } var n = t.telerik; n.scripts.push("telerik.menu.js"), n.menu = function (e, i) { this.element = e, this.nextItemZIndex = 100, t.extend(this, i), t(".t-item:not(.t-state-disabled)", e).live("mouseenter", n.delegate(this, this.mouseenter)).live("mouseleave", n.delegate(this, this.mouseleave)).live("click", n.delegate(this, this.click)), t(".t-item:not(.t-state-disabled) > .t-link", e).live("mouseenter", n.hover).live("mouseleave", n.leave), t(".t-item.t-state-disabled", e).live("click", function () { return !1 }), t(document).click(n.delegate(this, this.documentClick)), n.bind(this, { select: this.onSelect, open: this.onOpen, close: this.onClose, load: this.onLoad }) }, n.menu.prototype = { toggle: function (e, i) { t(e).each(function () { t(this).toggleClass("t-state-default", i).toggleClass("t-state-disabled", !i) }) }, enable: function (t) { this.toggle(t, !0) }, disable: function (t) { this.toggle(t, !1) }, open: function (i) { var o = this, s = "top" == t(o.element).attr("g-orientation"); t(i).each(function () { var i = t(this); clearTimeout(i.data("timer")), i.data("timer", setTimeout(function () { var t = i.find(".t-group:first"); if (t.length) { if (s) n.fx.play(o.effects, t, e(i)); else { var r = t.parent().hasClass("t-animation-container"), l = r ? t.parent() : t; (old = l.data("old-bottom")) && (l.css("bottom", old), l.css("top", l.data("old-top"))); var a = l.attr("style"); l.css({ position: "absolute", visibility: "hidden", display: "block" }), viewport = l.scrollParent(), viewport = null == viewport || 0 == viewport.length ? null : viewport[0], viewport = null == viewport || viewport == document ? document.body : viewport, viewportBottom = Math.min(viewport.getBoundingClientRect().bottom, document.body.getBoundingClientRect().bottom), containerRec = l[0].getBoundingClientRect(), 0 == containerRec.height && (containerRec = t[0].getBoundingClientRect()), l.attr("style", a ? a : ""); var c = e(i), u = i[0].getBoundingClientRect().bottom, d = -(viewportBottom - u) + 20; containerRec.bottom > viewportBottom && r && (l.data("old-bottom", l.css("bottom")), l.data("old-top", l.css("top")), l.css("bottom", d), l.css("top", "auto")), n.fx.play(o.effects, t, c), containerRec.bottom > viewportBottom && !r && (l = l.parent(), l.data("old-bottom", l.css("bottom")), l.data("old-top", l.css("top")), l.css("bottom", d), l.css("top", "auto")) } i.css("z-index", o.nextItemZIndex++) } }, 100)) }) }, close: function (i) { var o = this; t(i).each(function (i, s) { var r = t(s); clearTimeout(r.data("timer")), r.data("timer", setTimeout(function () { var i = r.find(".t-group:first"); i.length && (n.fx.rewind(o.effects, i, e(r), function () { r.css("zIndex", ""), 0 == t(o.element).find(".t-group:visible").length && (o.nextItemZIndex = 100) }), i.find(".t-group").stop(!1, !0)) }, 100)) }) }, mouseenter: function (e, n) { var o = t(n); if ((!this.openOnClick || this.clicked) && !i(n, e.relatedTarget)) { this.triggerEvent("open", o), this.open(o); var s = o.parent().closest(".t-item")[0]; s && !i(s, e.relatedTarget) && this.mouseenter(e, s) } this.openOnClick && this.clicked && (this.triggerEvent("close", o), o.siblings().each(t.proxy(function (e, i) { this.close(t(i)) }, this))) }, mouseleave: function (e, n) { if (!this.openOnClick && !i(n, e.relatedTarget)) { var o = t(n); this.triggerEvent("close", o), this.close(o); var s = o.parent().closest(".t-item")[0]; s && !i(s, e.relatedTarget) && this.mouseleave(e, s) } }, click: function (e, i) { var o = t(i); return o.hasClass("t-state-disabled") ? (e.stopPropagation(), void e.preventDefault()) : n.trigger(this.element, "select", { item: o[0] }) ? (e.stopPropagation(), void e.preventDefault()) : void (o.parent().hasClass("t-menu") && this.openOnClick && (e.stopPropagation(), e.preventDefault(), this.clicked = !0, this.triggerEvent("open", o), this.open(o))) }, documentClick: function (e, i) { t.contains(this.element, e.target) || this.clicked && (this.clicked = !1, t(this.element).children(".t-item").each(t.proxy(function (e, i) { this.close(t(i)) }, this))) }, hasChildren: function (t) { return t.find(".t-group:first").length }, triggerEvent: function (t, e) { this.hasChildren(e) && n.trigger(this.element, t, { item: e[0] }) } }, t.fn.tMenu = function (t) { return n.create(this, { name: "tMenu", init: function (t, e) { return new n.menu(t, e) }, options: t }) }, t.fn.tMenu.defaults = { orientation: "horizontal", effects: n.fx.slide.defaults(), openOnClick: !1 } }(jQuery);